{{ define "main" }}
<h1>{{ .Title }}</h1>

<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>

<div id="search"></div>

<script>
  window.addEventListener('DOMContentLoaded', function () {
    new PagefindUI({
      element: '#search',
      showSubResults: true,
      showImages: false
    });

    // Support ?q= URL parameter
    var params = new URLSearchParams(window.location.search);
    var query = params.get('q');
    if (query) {
      var input = document.querySelector('.pagefind-ui__search-input');
      if (input) {
        input.value = query;
        input.dispatchEvent(new Event('input', { bubbles: true }));
      }
    }
  });
</script>
{{ end }}
