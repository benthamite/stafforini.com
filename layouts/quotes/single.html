{{ define "main" }}
{{/* Extract work metadata for Pagefind: quote pages lack author/title in their own front matter,
     so we resolve the linked work and inject its metadata as hidden spans for search indexing.
     data-pagefind-meta="title" overrides Pagefind's default title extraction. */}}
{{ $workAuthor := "" }}{{ $workTitle := "" }}
{{ with .Params.work }}
  {{ $work := $.Site.GetPage (printf "/works/%s" .) }}
  {{ with $work }}
    {{ $workAuthor = .Params.author }}
    {{ $workTitle = .Title }}
  {{ end }}
{{ end }}
<div>
  {{ with $workAuthor }}
  <span data-pagefind-meta="title" data-pagefind-ignore class="visually-hidden">{{ $workAuthor }} â€“ {{ $workTitle }}</span>
  <span data-pagefind-meta="work_author" data-pagefind-ignore class="visually-hidden">{{ $workAuthor }}</span>
  <span data-pagefind-meta="work_title" data-pagefind-ignore class="visually-hidden">{{ $workTitle }}</span>
  {{ end }}
  {{ partial "quote-entry.html" . }}
</div>
{{ end }}
